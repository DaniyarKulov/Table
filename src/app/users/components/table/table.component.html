<div class="container">
  <mat-form-field>
    <mat-label>Search</mat-label>
    <input #input (keyup)="applyFilter($event)" matInput>
  </mat-form-field>

  <div class="content" >
      <table [dataSource]="users" 
      class="table" 
      mat-table 
      matSort 
      matSortDisableClear
      (matSortChange)="sortUsers($event)"
      >

        <ng-container matColumnDef="name" sticky>
          <th *matHeaderCellDef="let element" mat-header-cell mat-sort-header class="table__name" 
          >Name</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              <p *ngIf="element.name" >{{element.name.first}} {{element.name.last}}</p>
            </td>
        </ng-container>

        <ng-container matColumnDef="age">
          <th *matHeaderCellDef="let element"  mat-header-cell mat-sort-header class="table__age">Age</th>
          <td *matCellDef="let element; let i = index" mat-cell>
            {{element.age}}
          </td>
        </ng-container>

        <ng-container matColumnDef="picture">
          <th *matHeaderCellDef mat-header-cell class="table__picture">Picture</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              <img [alt]="element.id" [ngSrc]="element.picture" height="32" width="32"> 
            </td>
        </ng-container>

        <ng-container matColumnDef="company">
          <th *matHeaderCellDef mat-header-cell mat-sort-header class="table__company">Company</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.company}}
          </td>
        </ng-container>

        <ng-container matColumnDef="balance">
          <th *matHeaderCellDef mat-header-cell mat-sort-header class="table__balance">Balance</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.balance}}
          </td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th *matHeaderCellDef mat-header-cell mat-sort-header class="table__email">Email</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.email}}
          </td>
        </ng-container>

        <ng-container matColumnDef="address">
          <th *matHeaderCellDef mat-header-cell mat-sort-header class="table__address">Address</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.address}}
          </td>
        </ng-container>

        <ng-container matColumnDef="tags">
          <th *matHeaderCellDef="let element"  [ngClass]="{'vision': isVision && localComparator(element?.name)}" mat-header-cell mat-sort-header class="table__tags">Tags</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.tags}}
          </td>
        </ng-container>

        <ng-container matColumnDef="favorite_fruit">
          <th *matHeaderCellDef="let element"  [ngClass]="{'vision': isVision && localComparator(element?.name)}" mat-header-cell mat-sort-header class="table__fruits">Favorite fruit</th>
          <td *matCellDef="let element; let i = index" mat-cell>
              {{element.favoriteFruit}}
          </td>
        </ng-container>

        <ng-template #arrow_up><mat-icon>keyboard_arrow_up</mat-icon></ng-template>

        <ng-container matColumnDef="isActive">
          <th *matHeaderCellDef mat-header-cell> 
            <ng-container >
              <mat-icon (click)="onVision()">add</mat-icon>
              <section  *ngIf="isVision" class="table__section">
                  <ng-container *ngFor="let option of displayedCheckbox">
                  <p ><mat-checkbox [checked]="true" (change)="checked(option)">{{option}}</mat-checkbox></p>
                </ng-container>
              </section>
          </ng-container></th>
          <td *matCellDef="let element" mat-cell>
           
          </td>
        </ng-container>

        <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
        <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>

        <tr *matNoDataRow class="mat-row">
          <td class="table__not-found" colspan="4">No data matching the filter: "{{input.value}}"</td>
        </tr>
      </table>
  </div>

  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
</div>
